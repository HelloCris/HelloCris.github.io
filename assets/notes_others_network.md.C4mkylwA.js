import{_ as t,c as e,o,ag as l}from"./chunks/framework.bCALENAD.js";const P=JSON.parse('{"title":"网络【todo】","description":"","frontmatter":{},"headers":[],"relativePath":"notes/others/network.md","filePath":"notes/others/network.md","lastUpdated":1770968593000}'),i={name:"notes/others/network.md"};function r(d,a,h,n,s,c){return o(),e("div",null,[...a[0]||(a[0]=[l('<h1 id="网络【todo】" tabindex="-1">网络【todo】 <a class="header-anchor" href="#网络【todo】" aria-label="Permalink to &quot;网络【todo】&quot;">​</a></h1><h2 id="基础概念" tabindex="-1">基础概念 <a class="header-anchor" href="#基础概念" aria-label="Permalink to &quot;基础概念&quot;">​</a></h2><h3 id="浏览器从输入url到显示页面的过程" tabindex="-1">浏览器从输入URL到显示页面的过程 <a class="header-anchor" href="#浏览器从输入url到显示页面的过程" aria-label="Permalink to &quot;浏览器从输入URL到显示页面的过程&quot;">​</a></h3><div class="info custom-block"><p class="custom-block-title">流程</p><blockquote><ol><li>用户输入 URL 并回车</li><li>DNS 解析</li><li>建立 TCP 连接，发起 HTTP 请求</li><li>服务器处理并返回响应</li><li>浏览器接收响应并开始解析</li><li>布局（Layout / Reflow）</li><li>绘制</li><li>合成（Composite）</li><li>后续资源加载与交互</li></ol></blockquote></div><h4 id="第-1-步-用户输入-url-并回车" tabindex="-1">第 1 步：用户输入 URL 并回车 <a class="header-anchor" href="#第-1-步-用户输入-url-并回车" aria-label="Permalink to &quot;第 1 步：用户输入 URL 并回车&quot;">​</a></h4><ul><li>浏览器解析输入内容： <ul><li>如果是关键词（如 “天气”），可能走默认搜索引擎；</li><li>如果是合法 URL（如 <code>https://github.com/</code>），进入下一步。</li></ul></li></ul><h4 id="第-2-步-dns-解析-将域名转为-ip-地址" tabindex="-1">第 2 步：DNS 解析（将域名转为 IP 地址） <a class="header-anchor" href="#第-2-步-dns-解析-将域名转为-ip-地址" aria-label="Permalink to &quot;第 2 步：DNS 解析（将域名转为 IP 地址）&quot;">​</a></h4><p><strong>浏览器检查缓存顺序：</strong></p><p>DNS缓存 -&gt; 本地Hosts文件 -&gt; 向本地DNS服务器发起查询 -&gt; 若未命中，递归查询根域名服务器/顶级域（.com）/权威DNS服务器</p><ul><li>最终获得目标服务器的 <strong>IP 地址</strong>（如 <code>20.205.243.166</code>）</li></ul><h4 id="第-3-步-建立-tcp-连接-发起-http-请求" tabindex="-1">第 3 步：建立 TCP 连接，发起 HTTP 请求 <a class="header-anchor" href="#第-3-步-建立-tcp-连接-发起-http-请求" aria-label="Permalink to &quot;第 3 步：建立 TCP 连接，发起 HTTP 请求&quot;">​</a></h4><ul><li>浏览器通过 <strong>TCP 协议</strong> 与服务器 IP 建立连接（默认端口 80/HTTP 或 443/HTTPS）。</li><li>浏览器构造 HTTP 请求报文</li><li>通过已建立的 TCP（或 QUIC）连接发送请求。</li></ul><h4 id="第-4-步-服务器处理并返回响应" tabindex="-1">第 4 步：服务器处理并返回响应 <a class="header-anchor" href="#第-4-步-服务器处理并返回响应" aria-label="Permalink to &quot;第 4 步：服务器处理并返回响应&quot;">​</a></h4><ul><li>服务器收到请求后： <ul><li>路由匹配</li><li>执行后端逻辑（如查询数据库）</li><li>生成 HTML 内容</li></ul></li><li>返回 HTTP 响应</li></ul><h4 id="第-5-步-浏览器接收响应并开始解析" tabindex="-1">第 5 步：浏览器接收响应并开始解析 <a class="header-anchor" href="#第-5-步-浏览器接收响应并开始解析" aria-label="Permalink to &quot;第 5 步：浏览器接收响应并开始解析&quot;">​</a></h4><ol><li><p>解析 HTML 构建 DOM 树</p><ul><li>浏览器逐字节解析 HTML，遇到标签就创建 DOM 节点。</li><li><strong>遇到 <code>&lt;script&gt;</code></strong>： <ul><li>若无 <code>async</code>/<code>defer</code>：<strong>阻塞 HTML 解析</strong>，立即下载并执行 JS。</li><li><code>defer</code>：延迟到 DOM 解析完后执行（按顺序）。</li><li><code>async</code>：异步下载，下载完立即执行（不保证顺序）。</li></ul></li><li><strong>遇到 <code>&lt;link rel=&quot;stylesheet&quot;&gt;</code></strong>： <ul><li>CSS 不阻塞 HTML 解析，但<strong>阻塞 DOM 渲染</strong>（因需构建 CSSOM）。</li></ul></li></ul></li><li><p>加载 CSS 并构建 CSSOM</p><ul><li>下载 CSS 文件 → 解析 → 构建 <strong>CSSOM（CSS Object Model）</strong></li><li>CSSOM 与 DOM 结合形成 <strong>Render Tree（渲染树）</strong></li></ul></li><li><p>构建 Render Tree</p><ul><li>Render Tree = DOM + CSSOM（只包含可见元素，如 <code>display: none</code> 的节点会被剔除）</li></ul></li></ol><h4 id="第-6-步-布局-layout-reflow" tabindex="-1">第 6 步：布局（Layout / Reflow） <a class="header-anchor" href="#第-6-步-布局-layout-reflow" aria-label="Permalink to &quot;第 6 步：布局（Layout / Reflow）&quot;">​</a></h4><ul><li>计算每个 Render Tree 节点的<strong>几何信息</strong>（位置、大小）。这个过程也叫 <strong>Reflow</strong>。根节点（viewport）开始，递归计算。</li></ul><h4 id="第-7-步-绘制-paint-rasterization" tabindex="-1">第 7 步：绘制（Paint / Rasterization） <a class="header-anchor" href="#第-7-步-绘制-paint-rasterization" aria-label="Permalink to &quot;第 7 步：绘制（Paint / Rasterization）&quot;">​</a></h4><ul><li>将 Render Tree 转换为屏幕上的像素。</li><li>分层（Layer）处理：如 transform、opacity 元素会提升为单独图层。</li><li>绘制指令发送给 GPU（合成阶段）。</li></ul><h4 id="第-8-步-合成-composite" tabindex="-1">第 8 步：合成（Composite） <a class="header-anchor" href="#第-8-步-合成-composite" aria-label="Permalink to &quot;第 8 步：合成（Composite）&quot;">​</a></h4><ul><li>浏览器将多个图层<strong>按顺序合并</strong>，生成最终图像。</li><li>由 <strong>Compositor 线程</strong>完成，不阻塞主线程。</li><li>显示在屏幕上。</li></ul><blockquote><p>✅ 至此，<strong>首屏内容已渲染完成（First Paint / First Contentful Paint）</strong></p></blockquote><h4 id="第-9-步-后续资源加载与交互" tabindex="-1">第 9 步：后续资源加载与交互 <a class="header-anchor" href="#第-9-步-后续资源加载与交互" aria-label="Permalink to &quot;第 9 步：后续资源加载与交互&quot;">​</a></h4><ul><li>执行 JS（如 <code>DOMContentLoaded</code> 事件触发）</li><li>加载图片、视频、字体等非关键资源</li><li>执行 <code>window.onload</code>（所有资源加载完毕）</li><li>用户可交互（如点击按钮、滚动）</li></ul><h3 id="网络层级-osi-七层模型" tabindex="-1">网络层级 - OSI 七层模型 <a class="header-anchor" href="#网络层级-osi-七层模型" aria-label="Permalink to &quot;网络层级 - OSI 七层模型&quot;">​</a></h3><table tabindex="0"><thead><tr><th>层数</th><th>名称</th><th>核心功能</th><th>前端是否关心？</th><th>关联前端场景</th></tr></thead><tbody><tr><td>7</td><td>应用层（Application）</td><td>提供用户接口和网络服务（如 HTTP、FTP、SMTP）</td><td>✅ 高度相关</td><td><code>fetch()</code>、<code>XMLHttpRequest</code>、WebSocket、API 调用、浏览器地址栏访问网页</td></tr><tr><td>6</td><td>表示层（Presentation）</td><td>数据格式转换、加密解密、压缩</td><td>⚠️ 间接相关</td><td>HTTPS 中的 TLS 加密（如证书、AES）、JSON/XML 编码、图片压缩（WebP）</td></tr><tr><td>5</td><td>会话层（Session）</td><td>建立、管理和终止会话（对话控制）</td><td>⚠️ 基本不直接接触</td><td>登录会话（Session ID）、WebSocket 长连接维持（可视为会话）</td></tr><tr><td>4</td><td>传输层（Transport）</td><td>端到端通信、可靠传输（TCP）或快速传输（UDP）</td><td>⚠️ 需了解概念</td><td>TCP 保证请求完整到达；HTTP/HTTPS 基于 TCP；WebSocket 也基于 TCP</td></tr><tr><td>3</td><td>网络层（Network）</td><td>路由选择、IP 寻址</td><td>❌ 不关心</td><td>IP 地址分配、路由器转发（由操作系统/网络设备处理）</td></tr><tr><td>2</td><td>数据链路层（Data Link）</td><td>同一局域网内设备通信（MAC 地址）</td><td>❌ 不关心</td><td>Wi-Fi、以太网帧传输（底层硬件处理）</td></tr><tr><td>1</td><td>物理层（Physical）</td><td>传输比特流（电压、光信号等）</td><td>❌ 完全无关</td><td>网线、光纤、无线信号</td></tr></tbody></table><table tabindex="0"><thead><tr><th>应用层协议</th><th>作用</th><th>前端场景</th></tr></thead><tbody><tr><td>HTTP/HTTPS</td><td>获取 HTML、CSS、JS、图片、API 数据</td><td>所有页面加载和 Ajax 请求</td></tr><tr><td>WebSocket</td><td>双向实时通信</td><td>聊天、股票行情、在线协作</td></tr><tr><td>DNS</td><td>将域名（如 <code>api.example.com</code>）转为 IP 地址</td><td>影响首屏加载速度，可通过 <code>dns-prefetch</code> 优化</td></tr></tbody></table><h3 id="客户端-服务端" tabindex="-1">客户端 &amp; 服务端 <a class="header-anchor" href="#客户端-服务端" aria-label="Permalink to &quot;客户端 &amp; 服务端&quot;">​</a></h3><h3 id="ip地址-域名-dns" tabindex="-1">ip地址/域名/DNS <a class="header-anchor" href="#ip地址-域名-dns" aria-label="Permalink to &quot;ip地址/域名/DNS&quot;">​</a></h3><h2 id="tcp-udp协议" tabindex="-1">TCP/UDP协议 <a class="header-anchor" href="#tcp-udp协议" aria-label="Permalink to &quot;TCP/UDP协议&quot;">​</a></h2><h3 id="tcp协议" tabindex="-1">TCP协议 <a class="header-anchor" href="#tcp协议" aria-label="Permalink to &quot;TCP协议&quot;">​</a></h3><h3 id="udp协议" tabindex="-1">UDP协议 <a class="header-anchor" href="#udp协议" aria-label="Permalink to &quot;UDP协议&quot;">​</a></h3><h2 id="http-https协议" tabindex="-1">HTTP/HTTPS协议 <a class="header-anchor" href="#http-https协议" aria-label="Permalink to &quot;HTTP/HTTPS协议&quot;">​</a></h2><h3 id="http协议" tabindex="-1">HTTP协议 <a class="header-anchor" href="#http协议" aria-label="Permalink to &quot;HTTP协议&quot;">​</a></h3><h3 id="https协议" tabindex="-1">HTTPS协议 <a class="header-anchor" href="#https协议" aria-label="Permalink to &quot;HTTPS协议&quot;">​</a></h3><h3 id="请求方式" tabindex="-1">请求方式 <a class="header-anchor" href="#请求方式" aria-label="Permalink to &quot;请求方式&quot;">​</a></h3><h3 id="状态码" tabindex="-1">状态码 <a class="header-anchor" href="#状态码" aria-label="Permalink to &quot;状态码&quot;">​</a></h3><h3 id="请求头与响应头" tabindex="-1">请求头与响应头 <a class="header-anchor" href="#请求头与响应头" aria-label="Permalink to &quot;请求头与响应头&quot;">​</a></h3><h3 id="http版本" tabindex="-1">HTTP版本 <a class="header-anchor" href="#http版本" aria-label="Permalink to &quot;HTTP版本&quot;">​</a></h3><h2 id="同源策略与跨域-cors" tabindex="-1">同源策略与跨域(CORS) <a class="header-anchor" href="#同源策略与跨域-cors" aria-label="Permalink to &quot;同源策略与跨域(CORS)&quot;">​</a></h2><h3 id="同源策略" tabindex="-1">同源策略 <a class="header-anchor" href="#同源策略" aria-label="Permalink to &quot;同源策略&quot;">​</a></h3><h3 id="跨域问题" tabindex="-1">跨域问题 <a class="header-anchor" href="#跨域问题" aria-label="Permalink to &quot;跨域问题&quot;">​</a></h3><h2 id="前端发起网络请求" tabindex="-1">前端发起网络请求 <a class="header-anchor" href="#前端发起网络请求" aria-label="Permalink to &quot;前端发起网络请求&quot;">​</a></h2><h3 id="ajax" tabindex="-1">AJAX <a class="header-anchor" href="#ajax" aria-label="Permalink to &quot;AJAX&quot;">​</a></h3><h3 id="fetch" tabindex="-1">Fetch <a class="header-anchor" href="#fetch" aria-label="Permalink to &quot;Fetch&quot;">​</a></h3><h2 id="认证与会话管理" tabindex="-1">认证与会话管理 <a class="header-anchor" href="#认证与会话管理" aria-label="Permalink to &quot;认证与会话管理&quot;">​</a></h2><h3 id="cookie" tabindex="-1">cookie <a class="header-anchor" href="#cookie" aria-label="Permalink to &quot;cookie&quot;">​</a></h3><h3 id="session" tabindex="-1">session <a class="header-anchor" href="#session" aria-label="Permalink to &quot;session&quot;">​</a></h3><h2 id="缓存机制" tabindex="-1">缓存机制 <a class="header-anchor" href="#缓存机制" aria-label="Permalink to &quot;缓存机制&quot;">​</a></h2><h3 id="强缓存" tabindex="-1">强缓存 <a class="header-anchor" href="#强缓存" aria-label="Permalink to &quot;强缓存&quot;">​</a></h3><h3 id="协商缓存" tabindex="-1">协商缓存 <a class="header-anchor" href="#协商缓存" aria-label="Permalink to &quot;协商缓存&quot;">​</a></h3><h2 id="网络安全" tabindex="-1">网络安全 <a class="header-anchor" href="#网络安全" aria-label="Permalink to &quot;网络安全&quot;">​</a></h2><h3 id="xss攻击" tabindex="-1">XSS攻击 <a class="header-anchor" href="#xss攻击" aria-label="Permalink to &quot;XSS攻击&quot;">​</a></h3><h3 id="csrf攻击" tabindex="-1">CSRF攻击 <a class="header-anchor" href="#csrf攻击" aria-label="Permalink to &quot;CSRF攻击&quot;">​</a></h3><h3 id="csp内容安全策略" tabindex="-1">CSP内容安全策略 <a class="header-anchor" href="#csp内容安全策略" aria-label="Permalink to &quot;CSP内容安全策略&quot;">​</a></h3><h2 id="性能优化中的网络技巧" tabindex="-1">性能优化中的网络技巧 <a class="header-anchor" href="#性能优化中的网络技巧" aria-label="Permalink to &quot;性能优化中的网络技巧&quot;">​</a></h2>',57)])])}const b=t(i,[["render",r]]);export{P as __pageData,b as default};
